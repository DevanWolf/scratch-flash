<project name="common"><macrodef name="git-commit-id"><attribute name="repository" default="."/><attribute name="outputproperty"/><sequential><local name="git.present"/><local name="git.revision"/><available file="@{repository}/.git" property="git.present"/><exec executable="git" dir="@{repository}" outputproperty="git.revision" failifexecutionfails="false"><arg line="describe --dirty --long --always"/></exec><condition property="@{outputproperty}" value="${git.revision}" else="unknown"><and><isset property="git.revision"/><length string="${git.revision}" trim="yes" when="greater" length="0"/></and></condition></sequential></macrodef></project>
